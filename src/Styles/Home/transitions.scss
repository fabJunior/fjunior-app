@import '../mixins.scss';

.HomeContainer {
  .container.intro {
    .MuiButton-outlined {
      opacity: 0;
      @include transition(opacity 400ms 600ms);
    }

    .MuiTypography-h1 {
      opacity: 0;
      @include transition(opacity 600ms 300ms);
    }

    .MuiTypography-h3 {
      opacity: 0;
      height: 0;
      @include transition(opacity 400ms 1000ms, height 400ms 1000ms);
    }

    &.intro-enter-active, &.intro-enter-done {
      .MuiTypography-h1, .MuiTypography-h3 {
        opacity: 1;
      }

      .MuiTypography-h3 {
        height: 2rem;
      }

      .MuiButton-outlined {
        opacity: 1;
      }
    }
  }

  .floats {
    position: absolute;
    overflow-x: clip;
    inset: 0px;

    --scale: 1;

    @for $i from 1 through 7 {
      .react-parallax:nth-of-type(#{$i}) .react-parallax-background {
        @include animation(float-#{$i} 30s -1*random(100)/10+s ease infinite alternate);

        img:hover {
          @include transform(rotate(-60 + random(120) + deg) scale(calc(1.3 * var(--scale))));
        }
      }

      @keyframes float-#{$i} {
        0%   {@include translate_rotate(-30+random(60) + px, -30+random(60) + px, +5 - random(10) + deg);}
        25%  {@include translate_rotate(-30+random(60) + px, -30+random(60) + px, +5 - random(10) + deg);}
        50%  {@include translate_rotate(-30+random(60) + px, -30+random(60) + px, +5 - random(10) + deg);}
        75%  {@include translate_rotate(-30+random(60) + px, -30+random(60) + px, +5 - random(10) + deg);}
        100% {@include translate_rotate(-30+random(60) + px, -30+random(60) + px, +5 - random(10) + deg);}
      }
    }

    .react-parallax:nth-of-type(7) .react-parallax-background img {
      @include transform(rotate(-20deg) scale(var(--scale)));
    }

    .react-parallax:nth-of-type(6) .react-parallax-background img {
      @include transform(rotate(-20deg) scale(var(--scale)));
    }

    .react-parallax:nth-of-type(4) .react-parallax-background img {
      @include transform(rotate(20deg) scale(var(--scale)));
    }

    .react-parallax {
      pointer-events: none;
      user-select:none;

      .react-parallax-background {
        pointer-events: all;
        cursor: pointer;
      }
    }

    .react-parallax .react-parallax-background img {
      @include transform(rotate(0deg) scale(var(--scale)));
      @include transition(200ms ease);
    }

    @media only screen and (min-width: 2000px) {
      --scale: 1.2;
    }

    @media only screen and (max-width: 1450px) {
      --scale: 0.7;
    }

    @media only screen and (max-width: 800px) {
      --scale: 0.5;
    }

    particle {
      position: absolute;
      left: 0;
      top: 0;
      border-radius: 50%;
      pointer-events: none;
      opacity: 0;
    }
  }
}

/* From https://codepen.io/z-/pen/BoyXKr */

$size: 30px;
$speed: 3s;
$peakopacity:0.5;

.arrows {
	position: absolute;
	bottom:6rem;
	left:50%;
	width:$size;
	height:$size;
	@include transform(translateX(-50%));
	&:before {
		content: '';
		position: absolute;
		width:100%;
		height:100%;
		border-left:$size/3 solid rgba(255,255,255,$peakopacity);
		border-bottom:$size/3 solid rgba(255,255,255,$peakopacity);
		@include transform(translate($size/3,$size*4/3)rotate(-45deg));
		@include animation(arrows $speed linear infinite);
	}
	&:after {
		content: '';
		position: absolute;
		width:100%;
		height:100%;
		border-left:$size/3 solid rgba(255,255,255,$peakopacity);
		border-bottom:$size/3 solid rgba(255,255,255,$peakopacity);
		@include transform(translate($size*2/3,0px)rotate(-45deg));
		@include animation(arrows $speed linear infinite $speed/-2);
	}
}

@keyframes arrows {
  0% {
    border-left:$size/3 solid rgba(255,255,255,0);
    border-bottom:$size/3 solid rgba(255,255,255,0);
    @include transform(translate($size/-6,$size*4/-6)rotate(-45deg));
  }
  10%, 90% {
    border-left:$size/3 solid rgba(255,255,255,0);
    border-bottom:$size/3 solid rgba(255,255,255,0);
  }
  50% {
    border-left:$size/3 solid rgba(255,255,255,$peakopacity);
    border-bottom:$size/3 solid rgba(255,255,255,$peakopacity);
    @include transform(translate($size/-6,0px)rotate(-45deg));
  }
  100% {
    border-left:$size/3 solid rgba(255,255,255,0);
    border-bottom:$size/3 solid rgba(255,255,255,0);
    @include transform(translate($size/-6,$size*4/6)rotate(-45deg));
  }
}
